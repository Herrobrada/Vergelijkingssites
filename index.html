<!DOCTYPE html>
<html lang="nl">
<head>
<style>
  .styled-table a {
    font-size: 0.85em;
    color: #2A3C9A;
    text-decoration: none;
  }

  .styled-table a:hover {
    text-decoration: underline;
  }
</style>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>De Groene Reisvergelijker</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.6.2/fuse.min.js"></script>
  <style>
    :root {
      --pricewise-dark-blue: #2A3C9A;
      --pricewise-light-bg: #F3F7FA;
      --pricewise-green-button: #90D304;
      --pricewise-green-button-hover: #7dbd03;
      --white: #ffffff;
      --text-color: #333333;
      --heading-color: #1a1a1a;
      --box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      --border-radius: 8px;
      --input-border-color: #dcdcdc;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Roboto', Arial, sans-serif;
      background-color: var(--pricewise-light-bg);
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
  /* ‚úÖ DIT HEB IK TOEGEVOEGD */
  main > div:not(.form-container):not(.result-section):not(#spinner):not(.note) {
    display: none;
  }

    header {
      background-color: var(--pricewise-dark-blue);
      color: var(--white);
      padding: 60px 20px;
      text-align: center;
      font-size: 2.2em;
      font-weight: 700;
    }

    main {
      flex: 1;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .form-container {
      background-color: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 30px;
      display: flex;
      flex-wrap: wrap;
      gap: 25px;
      width: 100%;
      max-width: 800px;
      margin-bottom: 30px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      flex: 1;
      min-width: 200px;
    }

    input[type="text"],
    input[type="number"] {
      padding: 12px;
      font-size: 1em;
      border: 1px solid var(--input-border-color);
      border-radius: 4px;
      width: 100%;
    }

    button {
      padding: 12px 25px;
      background-color: var(--pricewise-green-button);
      color: var(--white);
      border: none;
      border-radius: 5px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: var(--pricewise-green-button-hover);
    }

    #spinner {
      display: none;
      margin: 20px auto;
      text-align: center;
      font-weight: bold;
    }

    .result-section {
      margin-top: 20px;
      width: 100%;
      max-width: 800px;
    }

    .result-item {
      background: var(--white);
      border-radius: var(--border-radius);
      padding: 18px 25px;
      margin-bottom: 15px;
      box-shadow: var(--box-shadow);
    }

    .note {
      font-style: italic;
      margin-top: 30px;
      font-size: 0.95em;
      color: #555;
      text-align: center;
    }

    #savings-message {
      background-color: #d9fdd3;
      padding: 18px;
      border-left: 5px solid #4CAF50;
      margin-top: 30px;
      font-weight: bold;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
    }

    footer {
      background-color: #000;
      color: #fff;
      text-align: center;
      padding: 15px;
      margin-top: auto;
    }
  </style>
</head>
<body>
  <header>
   De Groene Reisvergelijker
  </header>
  <main>
    <div class="form-container">
      <div class="form-group">
        <label for="from">Van 
        <input type="text" id="from" list="cities" oninput="filterCities(this.value)" />
      </div>
      <div class="form-group">
        <label for="to">Naar :</label>
        <input type="text" id="to" list="cities" oninput="filterCities(this.value)" />
      </div>
      <div class="form-group">
        <label for="persons">Aantal personen:</label>
        <input type="number" id="persons" value="1" min="1" />
      </div>
      <div class="form-group">
        <label>&nbsp;</label>
        <button onclick="startCalculation()">Bereken</button>
      </div>
    </div>
    <datalist id="cities"></datalist>

    <div id="spinner">‚è≥ Wij zoeken naar de groenste optie voor u...</div>

    <div class="result-section">
      <div id="distance"></div>
      <h3>De groenste optie is: <span id="best-mode"></span></h3>
      <div id="results"></div>
      <div id="savings-message"></div>
    </div>

    <div class="note">
      Gebruik de lokale naam van steden (bijv. Roma, Firenze, Berlin).
    </div>

  <style>
    .styled-table {
      border-collapse: collapse;
      margin: 25px auto;
      font-size: 0.95em;
      font-family: 'Roboto', sans-serif;
      min-width: 320px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background-color: white;
      border-radius: 8px;
      overflow: hidden;
    }

    .styled-table caption {
      font-size: 1.2em;
      font-weight: bold;
      padding: 15px;
      color: #2A3C9A;
      text-align: left;
    }

    .styled-table thead tr {
      background-color: #2A3C9A;
      color: #ffffff;
      text-align: left;
    }

    .styled-table th, .styled-table td {
      padding: 12px 15px;
    }

    .styled-table tbody tr {
      border-bottom: 1px solid #dddddd;
    }

    .styled-table tbody tr:nth-of-type(even) {
      background-color: #f3f7fa;
    }

    .styled-table tbody tr:last-of-type {
      border-bottom: 2px solid #2A3C9A;
    }
  </style>
</head>
<body>
  <!-- ... bestaande inhoud blijft ongewijzigd tot aan savings-message -->

  <div id="savings-message"></div>



  <!-- Nieuwe sectie onderaan voor dataverantwoording -->
 <section id="info-section" style="max-width: 900px; margin: 0 0 40px 40px; text-align: left;">
  <h3 style="font-size: 1.5em; margin-bottom: 20px; color: #1a1a1a;">
    Hoe komen wij aan onze informatie over gemiddelde CO‚ÇÇ-uitstoot en gemiddelde prijzen?
  </h3>

  <button onclick="toggleSources()" id="toggle-button" style="margin-bottom: 20px; padding: 10px 20px; background-color: #2A3C9A; color: white; border: none; border-radius: 5px; cursor: pointer;">
    Toon bronnen
  </button>

  <div id="source-tables" style="display: none;">
    <table class="styled-table">
      <caption style="text-align: left;">üåç Gemiddelde CO‚ÇÇ-uitstoot per kilometer per persoon</caption>
      <thead>
        <tr>
          <th>Vervoermiddel</th>
          <th>CO‚ÇÇ-uitstoot (kg/km/persoon)</th>
          <th>Toelichting</th>
          <th>Bronnen</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>üöÜ Trein</td><td>0,041</td><td>Elektrische treinen, EU-stroommix</td>
          <td><a href="https://www.eea.europa.eu" target="_blank">EEA</a>, <a href="https://www.gov.uk/government/collections/government-conversion-factors-for-company-reporting" target="_blank">UK DEFRA</a></td>
        </tr>
        <tr>
          <td>üöó Auto (elektrisch)</td><td>0,020</td><td>Gem. verbruik 15‚Äì18 kWh/100km</td>
          <td><a href="https://www.iea.org" target="_blank">IEA</a>, <a href="https://www.anwb.nl" target="_blank">ANWB</a></td>
        </tr>
        <tr>
          <td>üöó Auto (benzine)</td><td>0,120</td><td>6,5L/100km √ó 2,3 kg CO‚ÇÇ/L</td>
          <td><a href="https://www.eea.europa.eu" target="_blank">EEA</a></td>
        </tr>
        <tr>
          <td>üöó Auto (diesel)</td><td>0,100</td><td>5,5L/100km √ó 2,65 kg CO‚ÇÇ/L</td>
          <td><a href="https://www.eea.europa.eu" target="_blank">EEA</a></td>
        </tr>
        <tr>
          <td>‚úàÔ∏è Vliegtuig</td><td>0,250</td><td>Korte vluchten binnen Europa</td>
          <td><a href="https://www.atmosfair.de" target="_blank">Atmosfair</a>, <a href="https://www.gov.uk/government/collections/government-conversion-factors-for-company-reporting" target="_blank">DEFRA</a></td>
        </tr>
      </tbody>
    </table>

    <table class="styled-table">
      <caption style="text-align: left;">üí∞ Gemiddelde kosten per kilometer per persoon</caption>
      <thead>
        <tr>
          <th>Vervoermiddel</th>
          <th>Prijs (‚Ç¨ / km / persoon)</th>
          <th>Toelichting</th>
          <th>Bronnen</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>üöÜ Trein</td><td>‚Ç¨ 0,15</td><td>Gem. prijs Europa (zonder korting)</td>
          <td><a href="https://www.statista.com" target="_blank">Statista</a>, <a href="https://www.ns.nl" target="_blank">NS</a>, <a href="https://www.bahn.com" target="_blank">DB</a>, <a href="https://www.sncf.com" target="_blank">SNCF</a></td>
        </tr>
        <tr>
          <td>üöó Auto (elektrisch)</td><td>‚Ç¨ 0,05</td><td>‚Ç¨0,20/kWh √ó 15 kWh/100km</td>
          <td><a href="https://www.anwb.nl" target="_blank">ANWB</a>, <a href="https://www.iea.org" target="_blank">IEA</a></td>
        </tr>
        <tr>
          <td>üöó Auto (benzine)</td><td>‚Ç¨ 0,15</td><td>‚Ç¨1,90/L √ó 6,5L/100km</td>
          <td><a href="https://www.anwb.nl" target="_blank">ANWB</a></td>
        </tr>
        <tr>
          <td>üöó Auto (diesel)</td><td>‚Ç¨ 0,13</td><td>‚Ç¨1,75/L √ó 5,5L/100km</td>
          <td><a href="https://www.anwb.nl" target="_blank">ANWB</a></td>
        </tr>
        <tr>
          <td>‚úàÔ∏è Vliegtuig</td><td>‚Ç¨ 0,35</td><td>Gemiddelde prijs incl. belastingen</td>
          <td><a href="https://www.beuc.eu" target="_blank">BEUC</a>, <a href="https://www.ryanair.com" target="_blank">Ryanair</a>, <a href="https://www.easyjet.com" target="_blank">EasyJet</a></td>
        </tr>
      </tbody>
    </table>

    <p style="margin-top: 20px; font-size: 0.95em; color: #444; line-height: 1.6;">
      Wij maken gebruik van betrouwbare internationale bronnen en gemiddelden om reizigers inzicht te geven in de impact van hun vervoerskeuze. Uiteraard spelen veel factoren mee in de uiteindelijke uitstoot en kosten, zoals de bezettingsgraad van het vervoermiddel, de energiebron voor treinen of auto's, weersomstandigheden, en specifieke routes. Onze cijfers zijn dan ook niet bedoeld als exacte berekening, maar als een begrijpelijk en betrouwbaar kader voor bewuste keuzes.
    </p>
  </div>
</section>

<script>
  function toggleSources() {
    const tableDiv = document.getElementById("source-tables");
    const button = document.getElementById("toggle-button");
    const isHidden = tableDiv.style.display === "none";
    tableDiv.style.display = isHidden ? "block" : "none";
    button.innerText = isHidden ? "Verberg bronnen" : "Toon bronnen";
  }
</script>

</body>
</html>
  </main>
  <footer>
    ¬© Coen's groene vergelijker ‚Äì Voor alle resultaten maken wij gebruik van gemiddelde uitstoot per kilometer per vervoersmiddel op basis van de bovengenoemde tabellen - Er kunnen geen rechten worden ontleend aan deze pagina
  </footer>

  <script>
    let cityData = [];
    let fuse;

    async function loadCities() {
      const res = await axios.get("https://raw.githubusercontent.com/Herrobrada/Vergelijkingssites/main/europese_plaatsen.json");
      cityData = res.data;
      fuse = new Fuse(cityData, { keys: ['name'], threshold: 0.3, ignoreLocation: true });
    }

    function filterCities(input) {
      if (!fuse || input.length < 1) return;
      const matches = fuse.search(input).slice(0, 10).map(x => x.item.name);
      const datalist = document.getElementById("cities");
      datalist.innerHTML = [...new Set(matches)].sort().map(x => `<option value="${x}">`).join("");
    }

    function getCity(name) {
      const result = fuse.search(name);
      return result.length ? result[0].item : null;
    }

    function haversine(lat1, lon1, lat2, lon2) {
      const R = 6371;
      const dLat = (lat2 - lat1) * Math.PI / 180;
      const dLon = (lon2 - lon1) * Math.PI / 180;
      const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;
      return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    }

    function startCalculation() {
      document.getElementById("spinner").style.display = "block";
      document.getElementById("results").innerHTML = "";
      document.getElementById("savings-message").innerHTML = "";
      setTimeout(() => {
        document.getElementById("spinner").style.display = "none";
        calculate();
      }, 3000);
    }

    function calculate() {
      const from = getCity(document.getElementById("from").value);
      const to = getCity(document.getElementById("to").value);
      const persons = parseInt(document.getElementById("persons").value);

      if (!from || !to || persons < 1) return alert("Ongeldige invoer.");

      const distance = haversine(from.latitude, from.longitude, to.latitude, to.longitude);
      document.getElementById("distance").innerText = `Afstand tussen steden: ${distance.toFixed(0)} km`;

      const modes = [
        { type: "Trein", co2: 0.041, price: 0.15 },
        { type: "Auto (elektrisch)", co2: 0.02, price: 0.05, shared: true },
        { type: "Auto (benzine)", co2: 0.12, price: 0.15, shared: true },
        { type: "Auto (diesel)", co2: 0.10, price: 0.13, shared: true },
        { type: "Vliegtuig", co2: 0.25, price: 0.35 }
      ];

      const results = modes.map(m => {
        const co2 = m.co2 * distance * (m.shared ? 1/persons : persons);
        const cost = m.price * distance * (m.shared ? 1 : persons);
        return { ...m, co2: co2.toFixed(2), cost: cost.toFixed(2) };
      }).sort((a, b) => a.co2 - b.co2);

      document.getElementById("best-mode").innerText = results[0].type;

      document.getElementById("results").innerHTML = results.map(r => `
        <div class="result-item">
          <strong>${r.type}</strong>
          CO‚ÇÇ-uitstoot: ${r.co2} kg p.p.<br>
          Gemiddelde prijs: ‚Ç¨${r.cost} p.p.
        </div>
      `).join("");

      const verschil = (results[results.length-1].co2 - results[0].co2).toFixed(2);
      const biefstukken = Math.round(verschil / 5);
      const wijn = Math.round(verschil / 1.5);
      document.getElementById("savings-message").innerText = `Als je voor ${results[0].type} kiest in plaats van ${results[results.length-1].type}, bespaar je ${verschil} kg CO‚ÇÇ. Dat staat gelijk aan ${biefstukken} biefstukken of ${wijn} glazen wijn!`;
    }

    document.addEventListener("DOMContentLoaded", loadCities);
  </script>
</body>
</html>
